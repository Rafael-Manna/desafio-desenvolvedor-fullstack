<div class="container py-5">
  <div class="main-card shadow-lg border-0">
    
    <div class="card-header-custom p-4 d-flex justify-content-between align-items-center">
      <h3 class="m-0 font-weight-bold d-flex align-items-center text-white">
        <span class="mr-2">{{ editando ? 'üìù' : 'üë•' }}</span>
        {{ editando ? 'Editando Registro' : 'Gest√£o de Contatos' }}
      </h3>
      <button *ngIf="editando" class="btn btn-outline-light btn-sm rounded-pill px-3" (click)="cancelarEdicao()">
        Cancelar
      </button>
    </div>

    <div class="card-body p-4">
      <div class="row mb-4">
        <div class="col-md-4 mb-3">
          <label class="label-sombria">Nome Completo</label>
          <input type="text" class="form-control custom-input" [(ngModel)]="novoContato.nome" placeholder="Ex: Rafael Manna">
        </div>
        <div class="col-md-4 mb-3">
          <label class="label-sombria">Telefone</label>
          <input type="text" class="form-control custom-input" [(ngModel)]="novoContato.telefone" placeholder="(00) 00000-0000">
        </div>
        <div class="col-md-4 mb-3">
          <label class="label-sombria">E-mail</label>
          <input type="email" class="form-control custom-input" [(ngModel)]="novoContato.email" placeholder="nome@exemplo.com">
        </div>
        <div class="col-md-3 mb-3">
          <label class="label-sombria">Data de Nascimento</label>
          <input type="date" class="form-control custom-input" [(ngModel)]="novoContato.dataNascimento">
        </div>
        <div class="col-md-7 mb-3">
          <label class="label-sombria">Observa√ß√µes</label>
          <input type="text" class="form-control custom-input" [(ngModel)]="novoContato.observacoes" placeholder="Notas internas sobre o contato...">
        </div>
        <div class="col-md-2 mb-3 d-flex align-items-end">
          <button class="btn btn-primary-custom btn-block shadow-sm py-2" (click)="salvar()">
            {{ editando ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </div>

      <div class="divider my-5" style="border-top: 1px solid rgba(255,255,255,0.1);"></div>

      <div class="search-box mb-4 p-2 rounded-lg" style="background: rgba(0,0,0,0.2);">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text bg-transparent border-0">üîç</span>
          </div>
          <input type="text" class="form-control border-0 bg-transparent text-white" 
                 placeholder="Pesquisar por nome ou e-mail..." 
                 [(ngModel)]="termoPesquisa" (keyup)="filtrar()">
        </div>
      </div>

      <div class="table-responsive rounded-lg overflow-hidden">
        <table class="table table-striped table-hover m-0">
          <thead>
            <tr>
              <th class="border-0">ID</th>
              <th class="border-0">Nome</th>
              <th class="border-0">E-mail</th>
              <th class="border-0">Nascimento</th>
              <th class="border-0">Observa√ß√µes</th>
              <th class="border-0 text-center">A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let c of contatosExibidos">
              <td class="align-middle font-weight-bold text-muted">#{{ c.idPessoa }}</td>
              <td class="align-middle text-white">{{ c.nome }}</td>
              <td class="align-middle">{{ c.email }}</td>
              <td class="align-middle">{{ c.dataNascimento | date:'dd/MM/yyyy' }}</td>
              <td class="align-middle">
                <span class="text-truncate d-inline-block" style="max-width: 150px;" title="{{ c.observacoes }}">
                  {{ c.observacoes }}
                </span>
              </td>
              <td class="text-center align-middle">
                <button class="btn btn-action-edit btn-sm mr-2" (click)="editar(c)">Editar</button>
                <button class="btn btn-action-delete btn-sm" (click)="excluir(c.idPessoa)">Excluir</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="d-flex justify-content-between align-items-center mt-4 px-2">
        <p class="small text-muted mb-0">Total: <strong>{{ contatosFiltrados.length }}</strong> contatos</p>
        <div class="pagination-controls rounded-pill p-1 d-flex align-items-center">
          <button class="btn btn-link btn-sm text-muted" [disabled]="paginaAtual === 1" (click)="paginaAtual = paginaAtual - 1">Anterior</button>
          <span class="px-3 small font-weight-bold text-bege">{{ paginaAtual }} / {{ totalPaginas || 1 }}</span>
          <button class="btn btn-link btn-sm text-muted" [disabled]="paginaAtual >= totalPaginas" (click)="paginaAtual = paginaAtual + 1">Pr√≥xima</button>
        </div>
      </div>
    </div>
  </div>
</div>